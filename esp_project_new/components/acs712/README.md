## Компонент для работы с датчиком тока ACS712

### Описание

Компонент предназначен для работы с датчиком тока ACS712 в esp-idf.
Включает в себя функции инициализации, чтения сырах значений, значения напряжения и расчет тока в амперах.
Поддерживает калибровку с помощью схем Curve Fitting и Line Fitting.

### Структура данных датчика

Структура ```acs712_t``` содержит конфигурацию и параметры, необходимые для взаимодействия с датчиком ACS712:

```c
typedef struct {
    adc_oneshot_unit_handle_t adc_handle;   /**< Дескриптор для работы с ADC */
    adc_channel_t adc_channel;              /**< Канал ADC, используемый для датчика */
    adc_unit_t unit;                        /**< Единица ADC, используемая для работы */
    adc_atten_t atten;                      /**< Уровень ослабления ADC */
    adc_cali_handle_t cali_handle;          /**< Дескриптор калибровки ADC */
    bool calibrated;                        /**< Флаг, указывающий на успешную калибровку */
    float sensitivity;                      /**< Чувствительность датчика (мВ/А) */
    int calibrate_voltage;                  /**< Напряжение калибровки в мВ */
} acs712_t;
```

### API

#### Инициализация датчика ACS712

```c
esp_err_t acs712_init(acs712_t *acs712, adc_unit_t unit, adc_atten_t atten, adc_channel_t channel, float sensitivity)
```

Параметры:
- ```acs712```: Указатель на структуру данных датчика.
- ```unit```: Единица ADC, используемая для работы.
- ```atten```: Уровень ослабления ADC.
- ```channel```: Канал ADC для подключения датчика.
- ```sensitivity```: Чувствительность датчика (мВ/А).

Возвращает:
- ```ESP_OK``` когда успешная инициализация.
- ```ESP_FAIL``` когда произошла ошибка инициализации.

#### Деинициализация датчика ACS712

```c
esp_err_t acs712_deinit(acs712_t *acs712)
```

Параметры:
- ```acs712```: Указатель на структуру данных датчика.

Возвращает:
- ```ESP_OK``` в случае успешного деинициализации.
- ```ESP_ERR_INVALID_ARG``` если указатель acs712 равен NULL.
- ```ESP_FAIL``` когда произощла ошибка при деинициализации.

#### Рекалибровка ACS712

```c
esp_err_t asc712_recalibrate(acs712_t *acs712)
```

Параметры:
- ```acs712```: Указатель на структуру данных датчика.

Возвращает:
- ```ESP_OK``` в случае успешного рекалибровки.
- ```ESP_ERR_INVALID_ARG``` если указатель acs712 равен NULL.
- ```ESP_FAIL``` когда произощла ошибка при рекалибровки.

#### Чтение сырых данных ADC с ACS712

```c
esp_err_t acs712_read_raw(acs712_t *acs712, int *data)
```

Параметры:
- ```acs712```: Указатель на структуру данных датчика.
- ```data```: Указатель для сохранения прочитанного значения.

Возвращает:
- ```ESP_OK``` в случае успешного чтения.
- ```ESP_FAIL``` если чтение завершилось неудачей.

#### Чтение напряжения (мВ) с ACS712

```c
esp_err_t acs712_read_voltage(acs712_t *acs712, int *data)
```

Параметры:
- ```acs712```: Указатель на структуру данных датчика.
- ```data```: Указатель для сохранения прочитанного значения.

Возвращает:
- ```ESP_OK``` в случае успешного чтения.
- ```ESP_FAIL``` если чтение завершилось неудачей.

#### Чтение тока (А) с ASC712

```c
esp_err_t acs712_read_current(acs712_t *acs712, float *data)
```

Параметры:
- ```acs712```: Указатель на структуру данных датчика.
- ```data```: Указатель для сохранения прочитанного значения.

Возвращает:
- ```ESP_OK``` в случае успешного чтения.
- ```ESP_FAIL``` если чувствительность даьчика равно 0 или ошибка при чтении.